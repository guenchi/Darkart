
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Build Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="python.html" />
    
    
    <link rel="prev" href="../" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Python Interface</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="python.html">
            
                <a href="python.html#Build">
            
                    
                    Build
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="python.html">
            
                <a href="python.html#Definition">
            
                    
                    Definition
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="python.html">
            
                <a href="python.html#Py-call">
            
                    
                    Library Py-call
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.1" data-path="python.html">
            
                <a href="python.html#Python%20Library">
            
                    
                    Python Library
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.2" data-path="python.html">
            
                <a href="python.html#Point">
            
                    
                    Point
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.3" data-path="python.html">
            
                <a href="python.html#Function">
            
                    
                    Function
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.4" data-path="python.html">
            
                <a href="python.html#Number%20and%20String">
            
                    
                    Number and String
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.5" data-path="python.html">
            
                <a href="python.html#List%20and%20Tuple">
            
                    
                    List and Tuple
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.6" data-path="python.html">
            
                <a href="python.html#Numeric%20Operations">
            
                    
                    Numeric Operations
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.7" data-path="python.html">
            
                <a href="python.html#Python's%20list">
            
                    
                    Python's list
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.8" data-path="python.html">
            
                <a href="python.html#Python's%20tuple">
            
                    
                    Python's tuple
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.9" data-path="python.html">
            
                <a href="python.html#Python's%20set">
            
                    
                    Python's set
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.10" data-path="python.html">
            
                <a href="python.html#Python's%20sequence">
            
                    
                    Python's sequence
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.11" data-path="python.html">
            
                <a href="python.html#Python's%20dict">
            
                    
                    Python's dict
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.12" data-path="python.html">
            
                <a href="python.html#Python's%20mapping">
            
                    
                    Python's mapping
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.13" data-path="python.html">
            
                <a href="python.html#Display">
            
                    
                    Display
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="python.html">
            
                <a href="python.html#Py-FFI">
            
                    
                    Library Py-FFI
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.4.1" data-path="python.html">
            
                <a href="python.html#Interpreter">
            
                    
                    Interpreter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.2" data-path="python.html">
            
                <a href="python.html#Math">
            
                    
                    Math
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.3" data-path="python.html">
            
                <a href="python.html#Number">
            
                    
                    Number
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.4" data-path="python.html">
            
                <a href="python.html#String">
            
                    
                    String
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.5" data-path="python.html">
            
                <a href="python.html#List">
            
                    
                    List
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.6" data-path="python.html">
            
                <a href="python.html#Tuple">
            
                    
                    Tuple
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.7" data-path="python.html">
            
                <a href="python.html#Set">
            
                    
                    Set
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.8" data-path="python.html">
            
                <a href="python.html#Sequence">
            
                    
                    Sequence
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.9" data-path="python.html">
            
                <a href="python.html#Dictionary">
            
                    
                    Dictionary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.10" data-path="python.html">
            
                <a href="python.html#Mapping">
            
                    
                    Mapping
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.11" data-path="python.html">
            
                <a href="python.html#Run">
            
                    
                    Run
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.12" data-path="python.html">
            
                <a href="python.html#Library">
            
                    
                    Library
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.13" data-path="python.html">
            
                <a href="python.html#Module">
            
                    
                    Module
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.14" data-path="python.html">
            
                <a href="python.html#Object">
            
                    
                    Object
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.15" data-path="python.html">
            
                <a href="python.html#Compile">
            
                    
                    Compile
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Build</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="darkart-python-interface-users-guide">Darkart Python Interface User&apos;s Guide</h1>
<h2 id="build">Build</h2>
<p>I haven&apos;t prepared the makefile yet, so it will need some manual settings.</p>
<p>Compile <code>./c/py.c</code> file:</p>
<pre><code>cc -fPIC -shared  -L/Library/Frameworks/Python.framework/Versions/3.7/lib/ -lpython3.7 -o ../py.so py.c
</code></pre><p>Note that depending on the system, you may need to manually specify the path to <code>python.h</code>.</p>
<h2 id="definition">Definition:</h2>
<p><code>*po</code> representing a pointer to a Python Object reference.</p>
<p>Most of Py-call procedure accept or return a <code>*po</code>, in Scheme level, it&apos;s a memory address which is pointer a specific Python Object.</p>
<p>In the programme Py-call, the Class, the Method, the Number, all of it is <code>*po</code>. In other words, we just pass the memory address in Scheme level. </p>
<p>This fits the philosophy of Scheme: &quot;Parameter passing is by value, but the values are references.&quot;</p>
<p>This is also why the python library we call via the chez scheme is efficient than via the python&#xFF1A;We just pass some pointer via binary interface, no extra overheadr.</p>
<p>When you write a code with Py-call, keep all the values in type of *po, don&apos;t convert it into scheme data until get the final result.</p>
<p>In this document, <em>po may be followed by the type of Python object it points to, like: </em>po<number>, *po<list,tuple> etc.</list,tuple></number></p>
<p>And <em>po{value} means a `</em>po` point to this value.</p>
<h2 id="py-call">Py-call</h2>
<p>Library <code>(darkart py call)</code></p>
<h3 id="py-init-and-py-fin">Py-init and Py-fin</h3>
<p><code>(py-init)</code> and <code>(py-fin)</code> is the alias of <code>(py-initialize)</code> and <code>(py-finalize)</code>.</p>
<p>The codes which manipulating the python library must between <code>(py-init)</code> and <code>(py-fin)</code>.</p>
<p>Note that you can use it only on time, or you risk to get a </p>
<pre><code>Exception: invalid memory reference.  Some debugging context lost
</code></pre><p>If you want to write a library which wrap some Python Library, you don&apos;t have to use <code>(py-init)</code> and <code>(py-fin)</code> in the library code. like: <a href="https://github.com/guenchi/numpy/blob/master/numpy.sc" target="_blank">https://github.com/guenchi/numpy/blob/master/numpy.sc</a></p>
<h3 id="python-library">Python Library</h3>
<p>The library has to install, for exemple via Pip, before darkart call it.</p>
<p>You can go to python envirement do something like <code>import numpy</code> to test it.</p>
<pre><code class="lang-scheme">procedure: (py-import libraryName)

symbol -&gt; *po
</code></pre>
<p>Don&apos;t forget store the memory addres that procedure return, like:</p>
<pre><code class="lang-scheme">(<span class="hljs-name"><span class="hljs-builtin-name">define</span></span> np (<span class="hljs-name">py-import</span> <span class="hljs-symbol">&apos;numpy</span>))
</code></pre>
<p>To repackage a Library to Scheme, there is a Exemple:
<a href="https://github.com/guenchi/numpy/blob/master/numpy.sc" target="_blank">https://github.com/guenchi/numpy/blob/master/numpy.sc</a></p>
<h3 id="point">Point</h3>
<pre><code class="lang-scheme">procedure: (py-get object object)

*po -&gt; symbol -&gt; *po
</code></pre>
<p>This is the point syntax of Python.
Like:</p>
<pre><code class="lang-scheme">(define array (py-get np &apos;array))      = numpy.array

(define pi (py-get np &apos;pi))            = numpy.pi
</code></pre>
<h3 id="function">Function</h3>
<pre><code class="lang-scheme">procedure: (py-call callable args ...)

*po -&gt; any -&gt; ... -&gt; *po
</code></pre>
<p>Exemple:</p>
<pre><code class="lang-scheme">(py-call array (list-&gt;plist int &apos;(1 2 3 4 5)))
=&gt; *op{[1, 2, 3, 4, 5]}

(define np-array
    (lambda (x)
        (py-call array x)))

(np-array (list-&gt;plist int &apos;(1 2 3 4 5)))
=&gt; *op{[1, 2, 3, 4, 5]}
</code></pre>
<p>There is a helper to generate a procedure with *po<callable>:</callable></p>
<pre><code class="lang-scheme">procedure: (py-func object method)

*po -&gt; symbol -&gt; func
</code></pre>
<p>Exemple:</p>
<pre><code class="lang-scheme">(define np-array (py-func np &apos;array))

(np-array (list-&gt;plist int &apos;(1 2 3 4 5)))
=&gt; *op{[1, 2, 3, 4, 5]}
</code></pre>
<p>Some python function need named arguments, use:</p>
<pre><code class="lang-scheme">procedure: ((py-call* callable args ...) namedArgs)

*po -&gt; any -&gt; ... -&gt; alist -&gt; *po
</code></pre>
<p>The alist is like: <code>&apos;((symbol&lt;Name&gt; . *po) ...)</code></p>
<p>Exemple:</p>
<pre><code class="lang-scheme">((py-call* array (list-&gt;plist int &apos;(1 2 3 4 5)))
    `((&apos;dtype . ,(str &quot;float&quot;))))
=&gt; *op{[1.0, 2.0, 3.0, 4.0, 5.0]}

(define-syntax np-array
    (syntax-rules ()
        ((_ e)(py-call *array e))
        ((_ e (k v) ...)
            ((py-call* *array e) 
                (list (cons k v) ...)))))

(np-array (list-&gt;plist int &apos;(1 2 3 4 5)))
=&gt; *op{[1, 2, 3, 4, 5]}

(np-array (list-&gt;plist int &apos;(1 2 3 4 5)) (&apos;dtype (str &quot;float&quot;)))
=&gt; *op{[1.0, 2.0, 3.0, 4.0, 5.0]}
</code></pre>
<p>There is also a helper to generate a procedure which need named argument with *po<callable>:</callable></p>
<pre><code class="lang-scheme">procedure: (py-func* object method)

*po -&gt; symbol -&gt; func
</code></pre>
<p>Exemple:</p>
<pre><code class="lang-scheme">(define np-array (py-func* np &apos;array))

((np-array 
    (list-&gt;plist int &apos;(1 2 3 4 5)))
    `((&apos;dtype . ,(str &quot;float&quot;))))
=&gt; *op{[1.0, 2.0, 3.0, 4.0, 5.0]}
</code></pre>
<p>Args helpers:</p>
<pre><code class="lang-scheme">procedure: (py-args *po ...)

procedure: (py-args* &apos;(*po ...))

*po -&gt; ... -&gt; *po
</code></pre>
<p>This procedure is use to prepare a tuple of arguments for Python&apos;s function. 
It usually won&apos;t be used directly because it&apos;s included in <code>(py-call)</code>,<code>(py-call*)</code>,<code>(py-func)</code>and<code>(py-func*)</code>.</p>
<h3 id="number-and-string">Number and String</h3>
<pre><code class="lang-scheme">procedure: (pint? pythonData)

alias: (*int?)

procedure: (pflt? pythonData)

alias: (*flt?)

procedure: (pcplx? pythonData)

alias: (*cplx?)

procedure: (pstr? pythonData)

alias: (*str?)

*po -&gt; boolean
</code></pre>
<p>Type Check for Python&apos;s number and string.</p>
<pre><code class="lang-scheme">procedure: (s-&gt;pint int)

alias: (int)

int -&gt; *po

procedure: (s-&gt;pflt float)

alias: (flt)

float -&gt; *po

procedure: (s-&gt;pcplx cflonum)

alias: (cplx)

cflonum -&gt; *po

procedure: (s-&gt;pstr string)

alias: (str)

string -&gt; *po
</code></pre>
<p>Covert a Scheme data to Python data.</p>
<p>Exemple:</p>
<pre><code class="lang-scheme">(int 8)                       =&gt; *po{8}

(flt 3.1415926)               =&gt; *po{3.1415926}

(str &quot;foo&quot;)                   =&gt; *po{&quot;foo&quot;}
</code></pre>
<pre><code class="lang-scheme">procedure: (p-&gt;sint pyInt)

alias: (*int)

*po -&gt; number

procedure: (p-&gt;sflt pyFloat)

alias: (*flt)

*po -&gt; number

procedure: (p-&gt;scplx pyComplex)

alias: (*cplx)

*po -&gt; cflonum

procedure: (p-&gt;sstr pyStr)

alias: (*str)

*po -&gt; string
</code></pre>
<p>Covert a Python data to Scheme data.</p>
<p>Exemple:</p>
<pre><code class="lang-scheme">(*int (int 8))                =&gt; 8

(*flt (flt 3.1415926))        =&gt; 3.1415926

(*str (str &quot;foo&quot;))            =&gt; &quot;foo&quot;
</code></pre>
<pre><code class="lang-scheme">procedure: (s-&gt;ptype schemeData)

alias: (auto)

any -&gt; *po

procedure: (p-&gt;stype pythonData)

alias: (*auto)

*po -&gt; any
</code></pre>
<p>Automatic simple type detection and conversion.</p>
<p>Exemple:</p>
<pre><code class="lang-scheme">(*auto (int 8))                 =&gt; 8

(*auto (flt 3.1415926))         =&gt; 3.1415926

(*auto (str &quot;foo&quot;))             =&gt; &quot;foo&quot;
</code></pre>
<h3 id="list-and-tuple">List and Tuple</h3>
<pre><code class="lang-scheme">procedure: (list-&gt;plist list)

procedure: (list-&gt;ptuple list)

list -&gt; *po

procedure: (vector-&gt;plist vector)

procedure: (vector-&gt;ptuple vector)

vector -&gt; *po

procedure: (list-&gt;plist type list)

procedure: (list-&gt;ptuple type list)

func -&gt; list -&gt; *po

procedure: (vector-&gt;plist type vector)

procedure: (vector-&gt;ptuple type vector)

func -&gt; vector -&gt; *po

procedure: (list-&gt;plist* &apos;(*po ...))

procedure: (list-&gt;ptuple* &apos;(*po ...))

list (*po) -&gt; *po

procedure: (vector-&gt;plist* #(*po ...))

procedure: (vector-&gt;ptuple* #(*po ...))

vector (*po) -&gt; *po
</code></pre>
<p>Covert a Scheme&apos;s List and Vector to Python&apos;s List and Tuple.</p>
<p>The type covert procedure will be: <code>int</code> <code>flt</code> <code>cplx</code> <code>str</code> or nothing.</p>
<p>If there is no specific type transfer function, the program will automatically check the type, but it is more efficient when specifying the type.</p>
<p>Exemple:</p>
<pre><code class="lang-scheme">(<span class="hljs-name">list-&gt;plist</span> int &apos;(<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">8</span>))

(<span class="hljs-name">vector-&gt;plist*</span> `#(,(<span class="hljs-name">int</span> <span class="hljs-number">1</span>) ,(<span class="hljs-name">flt</span> <span class="hljs-number">3.14159</span>) ,(<span class="hljs-name">str</span> <span class="hljs-string">&quot;foo&quot;</span>)))
</code></pre>
<p>Attention that if don&apos;t specific list / vector&apos;s type, you have to covert data to *po before make list / vector.</p>
<pre><code class="lang-scheme">procedure: (plist-&gt;list pyList)

procedure: (ptuple-&gt;list pyTuple)

*po -&gt; list

procedure: (plist-&gt;vector pyList)

procedure: (ptuple-&gt;vector pyTuple)

*po -&gt; vector

procedure: (plist-&gt;list type pyList)

procedure: (ptuple-&gt;list type pyTuple)

func -&gt; *po -&gt; list

procedure: (plist-&gt;vector type pyList)

procedure: (ptuple-&gt;vector type pyTuple)

func -&gt; *po -&gt; vector

procedure: (plist-&gt;list* pyList)

procedure: (ptuple-&gt;list* pyTuple)

*po -&gt; list (*po)

procedure: (plist-&gt;vector* pyList)

procedure: (ptuple-&gt;vector* pyTuple)

*po -&gt; vector (*po)
</code></pre>
<p>The type procedure will be: <code>*int</code> <code>*flt</code> <code>*cplx</code> <code>*str</code> or nothing.</p>
<p>If there is no specific type transfer function, the program will automatically check the type, but it is more efficient when specifying the type.</p>
<p>Exemple:</p>
<pre><code class="lang-scheme">(plist-&gt;list *int (list-&gt;plist int &apos;(1 2 3 4 5 6 7 8)))
=&gt; (1 2 3 4 5 6 7 8)

(plist-&gt;list (list-&gt;plist* `(,(int 1) ,(flt 3.14159) ,(str &quot;foo&quot;))))
=&gt; (1 3.14159 &quot;foo&quot;)

(plist-&gt;list* (list-&gt;plist* `(,(int 1) ,(flt 3.14159) ,(str &quot;foo&quot;))))
=&gt; (*po{1} *po{3.14159} *po{&quot;foo&quot;})
</code></pre>
<p>In last case it return a list of Memory Adresse of <em>po. You can use (</em>int), (<em>flt) or (</em>str) to convert it to Scheme Data.</p>
<p>Like:</p>
<pre><code class="lang-scheme">(*int (car (plist-&gt;list* (list-&gt;plist* `(,(int 1) ,(flt 3.14159) ,(str &quot;foo&quot;))))))
=&gt; 1

(*flt (cadr (plist-&gt;list* (list-&gt;plist* `(,(int 1) ,(flt 3.14159) ,(str &quot;foo&quot;))))))
=&gt; 3.14159

(*str (caddr (plist-&gt;list* (list-&gt;plist* `(,(int 1) ,(flt 3.14159) ,(str &quot;foo&quot;))))))
=&gt; &quot;foo&quot;
</code></pre>
<h3 id="numeric-operations">Numeric Operations</h3>
<pre><code class="lang-scheme">procedure: (py-add pyNum pyNum)

procedure: (py-sub pyNum pyNum)

procedure: (py-mul pyNum pyNum)

procedure: (py-div pyNum pyNum)

procedure: (py-fdiv pyNum pyNum)

procedure: (py-mod pyNum pyNum)

procedure: (py-lsh pyNum pyNum)

procedure: (py-rsh pyNum pyNum)

procedure: (py-and pyNum pyNum)

procedure: (py-or pyNum pyNum)

procedure: (py-xor pyNum pyNum)

*po -&gt; *po -&gt; *po

procedure: (py-inv pyNum)

procedure: (py-abs pyNum)

procedure: (py-neg pyNum)

*po -&gt; *po
</code></pre>
<p>*po in here may be a number or a list, tuple, array(numpy) of number.</p>
<p>Exemple:</p>
<pre><code class="lang-scheme">(py-add (int 3) (int 5))                            =&gt; *po{8}

(py-mul (int 8) (list-&gt;plist int&apos; &apos;(1 2 3 4 5)))  =&gt; *po{[8, 16, 24, 32, 40]}

(py-abs (int -5))                                   =&gt; *po{5}
</code></pre>
<h3 id="pythons-list">Python&apos;s list</h3>
<pre><code class="lang-scheme">procedure: (plist? pyObject)

*po -&gt; boolean

procedure: (make-plist size)

int -&gt; *po

procedure: (plist-length pyList)

*po -&gt; int

procedure: (plist-ref pyList index ...)

*po -&gt; int -&gt; ... -&gt; *po

procedure: (plist-set! pyList index ... pyObject)

*po -&gt; int -&gt; ... -&gt; *po -&gt; 0 on success or -1 on failure.

procedure: (plist-sref pyList begin end)

*po -&gt; int -&gt; int -&gt; *po 

procedure: (plist-sref pyList index ... (begin end))

*po -&gt; int -&gt; ... -&gt; (int int) -&gt; *po

procedure: (plist-sset! pyList begin end pyList)

*po -&gt; int -&gt; int -&gt; *po -&gt; 0 on success or -1 on failure.

procedure: (plist-sset! pyList index ... (begin end) pyList)

*po -&gt; int -&gt; ... -&gt; (int int) -&gt; *po -&gt; 0 on success or -1 on failure.

procedure: (plist-insert! pyList index pyObject)

*po -&gt; int -&gt; *po -&gt; 0 on success or -1 on failure.

procedure: (plist-append! targetPyList pyList)

*po -&gt; *po -&gt; 0 on success or -1 on failure.

procedure: (plist-sort!)

0 on success or -1 on failure.

procedure: (plist-reverse!)

0 on success or -1 on failure.
</code></pre>
<h3 id="pythons-tuple">Python&apos;s tuple</h3>
<pre><code class="lang-scheme">procedure: (ptuple? *po)

return: boolean

procedure: (make-ptuple int&lt;index&gt;)

return: *po&lt;tuple&gt;

procedure: (ptuple-length *po&lt;tuple&gt;)

return: int&lt;index&gt;

procedure: (ptuple-ref *po&lt;tuple&gt; int&lt;index&gt; ...)

return: *po

procedure: (ptuple-set! *po&lt;tuple&gt; int&lt;index&gt; ... *po)

return: 0 on success or -1 on failure.

procedure: (ptuple-sref *po&lt;tuple&gt; int&lt;begin&gt; int&lt;end&gt;)

procedure: (ptuple-sref *po&lt;tuple&gt; int&lt;index&gt; ... (int&lt;begin&gt; int&lt;end&gt;))

return: *po&lt;tuple&gt;{slice}
</code></pre>
<h3 id="pythons-set">Python&apos;s set</h3>
<pre><code class="lang-scheme">procedure: (pset? *po)

return: boolean

procedure: (make-pset *po&lt;iterable&gt;)

return: *po&lt;set&gt;

procedure: (pset-length *po&lt;set&gt;)

return: int&lt;size&gt;

procedure: (pset-contains *po&lt;set&gt;)

return: 1 if found, 0 if not found, and -1 if an error is encountered.

procedure: (pset-add! *po&lt;set&gt; *po{key})

return: 0 on success or -1 on failure.

procedure: (pset-del! *po&lt;set&gt; *po{key})

return: 1 if found and removed, 0 if not found and no action taken, and -1 if an error is encountered.

procedure: (pset-pop! *po&lt;set&gt;)

return: *po{arbitrary_key}

procedure: (pset-clear! *po&lt;set&gt;)
</code></pre>
<h3 id="pythons-sequence">Python&apos;s sequence</h3>
<pre><code class="lang-scheme">procedure: (psequ? *po)

return: boolean

procedure: (psequ-&gt;plist *po&lt;sequence&gt;)

return: *po&lt;list&gt;

procedure: (psequ-&gt;ptuple *po&lt;sequence&gt;)

return: *po&lt;tuple&gt;

procedure: (psequ-length *po&lt;sequence&gt;)

return: int&lt;size&gt;

procedure: (psequ-append *po&lt;sequence&gt; *po&lt;sequence&gt;)

return: *po&lt;sequence&gt;

procedure: (psequ-repeat *po&lt;sequence&gt; int)

return: *po&lt;sequence&gt;

procedure: (psequ-ref *po&lt;sequence&gt; int)

return: *po

procedure: (psequ-set! *po&lt;sequence&gt; int *po)

return: 0 on success or -1 on failure.

procedure: (psequ-del! *po&lt;sequence&gt; int)

return: 0 on success or -1 on failure.

procedure: (psequ-sref *po&lt;sequence&gt; int int)

return: *po&lt;sequence&gt;{slice}

procedure: (psequ-sset! *po&lt;sequence&gt; int int *po&lt;sequence&gt;)

return: 0 on success or -1 on failure.

procedure: (psequ-sdel! *po&lt;sequence&gt; int int)

return: 0 on success or -1 on failure.

procedure: (psequ-count *po&lt;sequence&gt; *po&lt;value&gt;)

return: int

procedure: (psequ-contains *po&lt;sequence&gt; *po&lt;value&gt;)

return: 1 for true 0 for false -1 for fail

procedure: (psequ-index *po&lt;sequence&gt; *po&lt;value&gt;)

return: int
</code></pre>
<h3 id="pythons-dict">Python&apos;s dict</h3>
<pre><code class="lang-scheme">procedure: (pdict? *po)

return: boolean

procedure: (make-pdict)

return: *po&lt;dict&gt;

procedure: (pdict-length *po&lt;dict&gt;)

return: int&lt;size&gt;

procedure: (pdict-ref *po&lt;dict&gt; string&lt;key)

return: *po

procedure: (pdict-ref* *po&lt;dict&gt; *po{key})

return: *po

procedure: (pdict-set! *po&lt;dict&gt; string&lt;key&gt; *po&lt;value&gt;)

return: 0 on success or -1 on failure.

procedure: (pdict-set*! *po&lt;dict&gt; *po{key} *po&lt;value&gt;)

return: 0 on success or -1 on failure.

procedure: (pdict-del! *po&lt;dict&gt; string&lt;key&gt;)

return: 0 on success or -1 on failure.

procedure: (pdict-del*! *po&lt;dict&gt; *po{key})

return: 0 on success or -1 on failure.

procedure: (pdict-clear! *po&lt;dict&gt;)

return: &lt;void&gt;

procedure: (pdict-copy *po&lt;dict&gt;)

return: new *po&lt;dict&gt;

procedure: (pdict-keys *po&lt;dict&gt;)

return: *po&lt;list&gt;{key...}

procedure: (pdict-values)

return: *po&lt;list&gt;{value...}

procedure: (pdict-items)

return: *po&lt;list&gt;{key...values...}
</code></pre>
<h3 id="pythons-mapping">Python&apos;s mapping</h3>
<pre><code class="lang-scheme">procedure: (pmap? *po)

return: boolean

procedure: (pmap-size *po&lt;mapping&gt;)

return: int

procedure: (pmap-has? *po&lt;mapping&gt; string&lt;key&gt;)

return: boolean

procedure: (pmap-has*? *po&lt;mapping&gt; *po{key})

return: boolean

procedure: (pmap-ref *po&lt;mapping&gt; string&lt;key&gt;)

return: *po

procedure: (pmap-set! *po&lt;mapping&gt; string&lt;key&gt; *po{value}) 

return: 0 on success or -1 on failure.
</code></pre>
<h3 id="display">Display</h3>
<pre><code class="lang-scheme">procedure: (py-display *po)
</code></pre>
<p>Display anything of Python Object.</p>
<h2 id="py-ffi">Py-FFI</h2>
<p>Library <code>(darkart py ffi)</code></p>
<p>This file contains the underlying interface to Python. Usually you won&apos;t use it.</p>
<h3 id="interpreter">Interpreter</h3>
<pre><code class="lang-scheme">procedure: (py-initialize)

procedure: (py-finalize)
</code></pre>
<p>See <code>(py-init)</code> and <code>(py-fin)</code> in <code>(darkart py call)</code></p>
<pre><code class="lang-scheme">procedure: (py-incref)

procedure: (py-decref)

procedure: (py-new-interpreter)

procedure: (py-end-interpreter)
</code></pre>
<h3 id="math">Math</h3>
<pre><code class="lang-scheme">procedure: (py/number-add *po *po)

procedure: (py/number-subtract *po *po)

procedure: (py/number-multiply *po *po)

procedure: (py/number-divide *po *po)

procedure: (py/number-floor-divide *po *po)

procedure: (py/number-divmod *po *po)

procedure: (py/number-lshift *po *po)

procedure: (py/number-rshift *po *po)

procedure: (py/number-and *po *po)

procedure: (py/number-or *po *po)

procedure: (py/number-xor *po *po)

procedure: (py/number-invert *po)

procedure: (py/number-absolute *po)

procedure: (py/number-negative *po)

return: *po
</code></pre>
<p>*po in here may be a number or a list, tuple, array(numpy) of number.</p>
<h3 id="number">Number</h3>
<pre><code class="lang-scheme">procedure: (py/long-from-long number)

procedure: (py/long-from-unsigned-long number)

procedure: (py/long-from-longlong number)

procedure: (py/long-from-unsigned-longlong number)

procedure: (py/long-from-double number)

procedure: (py/long-from-size_t size_t)

procedure: (py/long-from-ssize_t ssize_t)

return: *po&lt;long&gt;
</code></pre>
<pre><code class="lang-scheme">procedure: (py/float-from-double number)

return: *po&lt;float&gt;
</code></pre>
<p>Pass Scheme number to Python.</p>
<pre><code class="lang-scheme">procedure: (py/int-as-long *po&lt;int&gt;)

procedure: (py/int-as-ssize_t *po&lt;int&gt;)

procedure: (py/long-as-long *po&lt;long&gt;)

procedure: (py/long-as-unsigned-long *po&lt;long&gt;)

procedure: (py/long-as-longlong *po&lt;long&gt;)

procedure: (py/long-as-unsigned-longlong *po&lt;long&gt;)

procedure: (py/long-as-double *po&lt;float&gt;)

procedure: (py/long-as-ssize_t *po&lt;float&gt;)

procedure: (py/float-as-double *po&lt;float&gt;)

return: number
</code></pre>
<p>Pass Python number to Scheme.</p>
<h3 id="string">String</h3>
<pre><code class="lang-scheme">procedure: (py/bytes-check? *po)

return: boolean
</code></pre>
<pre><code class="lang-scheme">procedure: (py/bytes-from-string string)

return: *po&lt;string&gt;
</code></pre>
<p>Pass Scheme string to Python.</p>
<pre><code class="lang-scheme">procedure: (py/bytes-as-string *po&lt;string&gt;)

return: string
</code></pre>
<p>Pass Python string to Scheme.</p>
<h3 id="list">List</h3>
<pre><code class="lang-scheme">procedure: (py/list-check? *po)

return: boolean

procedure: (py/list-new int&lt;size&gt;)

return: *po&lt;list&gt;

procedure: (py/list-size *po&lt;list&gt;)

return: int&lt;size&gt;

procedure: (py/list-get-item *po&lt;list&gt; int&lt;index&gt;)

return: *po

procedure: (py/list-set-item! *po&lt;list&gt; int&lt;index&gt; *po)

return: 0 on success or -1 on failure.

procedure: (py/list-get-slice *po&lt;list&gt; int int)

return: *po&lt;list&gt;{slice}

procedure: (py/list-set-slice! *po&lt;list&gt; int int *po&lt;list&gt;)

return: 0 on success or -1 on failure.

procedure: (py/list-insert! *po&lt;list&gt; int&lt;index&gt; *po)

return: 0 on success or -1 on failure.

procedure: (py/list-append! *po&lt;list-target&gt; *po&lt;list&gt;)

return: 0 on success or -1 on failure.

procedure: (py/list-sort!)

return: 0 on success or -1 on failure.

procedure: (py/list-reverse!)

return: 0 on success or -1 on failure.
</code></pre>
<h3 id="tuple">Tuple</h3>
<pre><code class="lang-scheme">procedure: (py/tuple-check? *po)

return: boolean

procedure: (py/tuple-new int&lt;index&gt;)

return: *po&lt;tuple&gt;

procedure: (py/tuple-size *po&lt;tuple&gt;)

return: int&lt;index&gt;

procedure: (py/tuple-get-item *po&lt;tuple&gt; int&lt;index&gt;)

return: *po

procedure: (py/tuple-set-item! *po&lt;tuple&gt; int&lt;index&gt; *po)

return: 0 on success or -1 on failure.

procedure: (py/tuple-get-slice *po&lt;tuple&gt; int int)

return: *po&lt;tuple&gt;{slice}
</code></pre>
<h3 id="set">Set</h3>
<pre><code class="lang-scheme">procedure: (py/set-check? *po)

return: boolean

procedure: (py/set-new *po&lt;iterable&gt;)

return: *po&lt;set&gt;

procedure: (py/set-size *po&lt;set&gt;)

return: int&lt;size&gt;

procedure: (py/set-contains *po&lt;set&gt;)

return: 1 if found, 0 if not found, and -1 if an error is encountered.

procedure: (py/set-add! *po&lt;set&gt; *po{key})

return: 0 on success or -1 on failure.

procedure: (py/set-discard! *po&lt;set&gt; *po{key})

return: 1 if found and removed, 0 if not found and no action taken, and -1 if an error is encountered.

procedure: (py/set-pop! *po&lt;set&gt;)

return: *po{arbitrary_key}

procedure: (py/set-clear! *po&lt;set&gt;)
</code></pre>
<h3 id="sequence">Sequence</h3>
<pre><code class="lang-scheme">procedure: (py/sequence-check? *po)

return: boolean

procedure: (py/sequence-list *po&lt;sequence&gt;)

return: *po&lt;list&gt;

procedure: (py/sequence-tuple *po&lt;sequence&gt;)

return: *po&lt;tuple&gt;

procedure: (py/sequence-size *po&lt;sequence&gt;)

return: int&lt;size&gt;

procedure: (py/sequence-concat *po&lt;sequence&gt; *po&lt;sequence&gt;)

return: *po&lt;sequence&gt;

procedure: (py/sequence-repeat *po&lt;sequence&gt; int)

return: *po&lt;sequence&gt;

procedure: (py/sequence-get-item *po&lt;sequence&gt; int)

return: *po

procedure: (py/sequence-set-item! *po&lt;sequence&gt; int *po)

return: 0 on success or -1 on failure.

procedure: (py/sequence-del-item! *po&lt;sequence&gt; int)

return: 0 on success or -1 on failure.

procedure: (py/sequence-get-slice *po&lt;sequence&gt; int int)

return: *po&lt;sequence&gt;{slice}

procedure: (py/sequence-set-slice! *po&lt;sequence&gt; int int *po&lt;sequence&gt;)

return: 0 on success or -1 on failure.

procedure: (py/sequence-del-slice! *po&lt;sequence&gt; int int)

return: 0 on success or -1 on failure.

procedure: (py/sequence-count *po&lt;sequence&gt; *po&lt;value&gt;)

return: int

procedure: (py/sequence-contains *po&lt;sequence&gt; *po&lt;value&gt;)

return: 1 for true 0 for false -1 for fail

procedure: (py/sequence-index *po&lt;sequence&gt; *po&lt;value&gt;)

return: int
</code></pre>
<h3 id="dictionary">Dictionary</h3>
<pre><code class="lang-scheme">procedure: (py/dict-check? *po)

return: boolean

procedure: (py/dict-new)

return: *po&lt;dict&gt;

procedure: (py/dict-size *po&lt;dict&gt;)

return: int&lt;size&gt;

procedure: (py/dict-get-item *po&lt;dict&gt; *po{key})

return: *po

procedure: (py/dict-get-item-string *po&lt;dict&gt; string&lt;key&gt;)

return: *po

procedure: (py/dict-set-item! *po&lt;dict&gt; *po{key} *po&lt;value&gt;)

return: 0 on success or -1 on failure.

procedure: (py/dict-set-item-string! *po&lt;dict&gt; string&lt;key&gt; *po&lt;value&gt;)

return: 0 on success or -1 on failure.

procedure: (py/dict-del-item! *po&lt;dict&gt; *po{key})

return: 0 on success or -1 on failure.

procedure: (py/dict-del-item-string! *po&lt;dict&gt; string&lt;key&gt;)

return: 0 on success or -1 on failure.

procedure: (py/dict-clear! *po&lt;dict&gt;)

return: &lt;void&gt;

procedure: (py/dict-copy *po&lt;dict&gt;)

return: new *po&lt;dict&gt;

procedure: (py/dict-keys *po&lt;dict&gt;)

return: *po&lt;list&gt;{key...}

procedure: (py/dict-values)

return: *po&lt;list&gt;{value...}

procedure: (py/dict-items)

return: *po&lt;list&gt;{key...values...}
</code></pre>
<h3 id="mapping">Mapping</h3>
<pre><code class="lang-scheme">procedure: (py/mapping-check? *po)

return: boolean

procedure: (py/mapping-size *po&lt;mapping&gt;)

return: int

procedure: (py/mapping-has-key-string? *po&lt;mapping&gt; string&lt;key&gt;)

return: boolean

procedure: (py/mapping-has-key? *po&lt;mapping&gt; *po{key})

return: boolean

procedure: (py/mapping-get-item-string *po&lt;mapping&gt; string&lt;key&gt;)

return: *po

procedure: (py/mapping-set-item-string! *po&lt;mapping&gt; string&lt;key&gt; *po{value}) 

return: 0 on success or -1 on failure.
</code></pre>
<h3 id="run">Run</h3>
<pre><code class="lang-scheme">procedure: (py/run-simple-file)

procedure: (py/run-file)

procedure: (py/run-file-exflags)

procedure: (py/run-simple-string)

procedure: (py/run-string)

procedure: (py/run-string-flags)
</code></pre>
<h3 id="library">Library</h3>
<pre><code class="lang-scheme">procedure: (py/import-import)

procedure: (py/import-import-module string&lt;library&gt;)

return: *po&lt;library&gt;

procedure: (py/import-exec-code-module)
</code></pre>
<h3 id="module">Module</h3>
<pre><code class="lang-scheme">procedure: (py/module-new)

procedure: (py/module-get-dict)

procedure: (py/module-get-name)

procedure: (py/module-get-filename)
</code></pre>
<h3 id="object">Object</h3>
<pre><code class="lang-scheme">procedure: (py/object-get-attr-string *po string&lt;keyword&gt;)

return: *po&lt;object,method&gt;

procedure: (py/object-call *po&lt;callable&gt; *po&lt;tulpe&gt;{argument...} *po&lt;dict&gt;{name:argument...})

return: *po

procedure: (py/object-call-object *po&lt;callable&gt; *po&lt;tuple&gt;{argument...)

return: *po

procedure: (py/object-str *po)

return: *po&lt;string&gt;

procedure: (py/callable-check? *po)

return: boolean
</code></pre>
<h3 id="compile">Compile</h3>
<pre><code class="lang-scheme">procedure: (py-compile-string)
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../" class="navigation navigation-prev " aria-label="Previous page: Introduction">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="python.html#Definition" class="navigation navigation-next " aria-label="Next page: Definition">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Build","level":"2.1","depth":1,"next":{"title":"Definition","level":"2.2","depth":1,"anchor":"#Definition","path":"manual/python.md","ref":"manual/python.md#Definition","articles":[]},"previous":{"title":"Introduction","level":"1.1","depth":1,"path":"README.md","ref":"README.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"manual/python.md","mtime":"2020-04-27T01:16:47.476Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-04-27T01:17:12.373Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

